# WP WhatsEvolution v1.2.1

🚀 **Integração completa com WooCommerce usando Evolution API**

## 🆕 **NOVO na v1.2.1: Quick Signup + Correções Importantes!**

### 🚀 **Quick Signup - Teste Grátis em 1 Click**
- **⚡ Teste 7 dias grátis** - Sem cartão de crédito
- **🔧 Configuração automática** - Plugin configurado em 30 segundos
- **🛠️ Sem VPS, sem Docker** - Zero complicação técnica
- **📞 Suporte incluído** - Ajuda durante todo o período de teste

### 🔧 **Correções Críticas**
- **✅ Instalação via GitHub** - Funciona perfeitamente mesmo com pasta `wp-whatsevolution-main`
- **🔧 Auto-updater corrigido** - Sistema de atualização automática agora 100% funcional
- **🏷️ Constantes otimizadas** - Caminhos de arquivos consistentes

### 🛒 **Carrinho Abandonado Aprimorado**
- **⚡ Zero Configuração de Webhook** - Ativação com 1 clique
- **🔒 100% Seguro** - Dados nunca saem do servidor WordPress
- **⚡ Zero Latência** - Processamento instantâneo via hooks internos
- **🎯 Interceptação Inteligente** - Captura carrinhos antes mesmo do webhook externo

---

## 📋 **Descrição**

O **WP WhatsEvolution** é o plugin mais avançado para integração de mensagens + WooCommerce, oferecendo:

- 🚀 **Quick Signup** com teste grátis de 7 dias
- 🛒 **Carrinho Abandonado** com interceptação interna revolucionária
- 📊 **Envio por Status** de pedido automatizado  
- 📱 **Envio Individual** para clientes específicos
- 📢 **Envio em Massa** com filtros avançados
- ✅ **Validação no Checkout** em tempo real
- 🎨 **Templates Personalizáveis** com shortcodes dinâmicos

---

## 🚀 **Quick Signup - Comece em 30 Segundos**

### 🎯 **Para quem não tem Evolution API**

1. **Acesse** "WhatsEvolution > 🚀 Teste Grátis"
2. **Preencha** seus dados (nome, email, WhatsApp)
3. **Clique** em "Criar Conta e Testar Agora"
4. **Aguarde** a configuração automática (30 segundos)
5. **Conecte** seu WhatsApp via QR Code
6. **Pronto!** Teste todas as funcionalidades por 7 dias

### ✨ **Vantagens do Quick Signup**
- 🆓 **7 dias grátis** sem cartão de crédito
- ⚡ **Configuração automática** de toda a Evolution API  
- 🛠️ **Sem complicações técnicas** (VPS, Docker, etc.)
- 📞 **Suporte técnico incluído** no período de teste
- 🔄 **Fácil upgrade** quando decidir continuar

---

## 🛒 **Carrinho Abandonado - Funcionalidades Detalhadas**

### 🔧 **Configuração Ultra-Simples**

1. **Instale** o plugin "WooCommerce Cart Abandonment Recovery"
2. **Ative** a integração em "WhatsEvolution > Carrinho Abandonado"  
3. **Personalize** a mensagem com shortcodes
4. **Pronto!** O sistema funciona automaticamente

### 🎨 **Shortcodes Disponíveis**

| Shortcode | Descrição | Exemplo |
|-----------|-----------|---------|
| `{first_name}` | Nome do cliente | João |
| `{full_name}` | Nome completo | João Silva |
| `{product_names}` | Produtos no carrinho | Produto A, Produto B |
| `{cart_total}` | Valor formatado | R$ 149,90 |
| `{checkout_url}` | Link finalizar compra | https://loja.com/checkout?token=abc |
| `{coupon_code}` | Código do cupom | DESCONTO10 |
| `{site_name}` | Nome da loja | Minha Loja |

### 📱 **Template Padrão Brasileiro**

```
🛒 Oi {first_name}!

Vi que você adicionou estes itens no carrinho:
📦 {product_names}

💰 Total: {cart_total}

🎁 Use o cupom *{coupon_code}* e ganhe desconto especial!
⏰ Mas corre que é só por hoje!

Finalize agora:
👆 {checkout_url}
```

---

## 🔧 **Requisitos**

- **PHP:** 7.4 ou superior
- **WordPress:** 5.8 ou superior  
- **WooCommerce:** 5.0 ou superior
- **Evolution API:** Instância configurada (ou use o Quick Signup!)

---

## 🚀 **Instalação e Configuração**

### 🎯 **Opção 1: Download do GitHub (Recomendado)**

```bash
1. Baixe o ZIP direto do GitHub
2. Envie para /wp-content/plugins/ (pode ficar como "wp-whatsevolution-main")  
3. Ative no painel WordPress
4. Use "🚀 Teste Grátis" para configuração automática
```

### 🎯 **Opção 2: Configuração Manual**

```bash
1. URL da API: https://sua-api.com
2. API Key: sua-chave-aqui
3. Instância: nome-da-instancia
4. Testar Conexão ✅
```

### 3️⃣ **Ativação Carrinho Abandonado**

```bash
1. Instalar "WooCommerce Cart Abandonment Recovery"
2. Ir em "WhatsEvolution > Carrinho Abandonado" 
3. Ativar integração ✅
4. Personalizar template (opcional)
```

---

## 📊 **Todas as Funcionalidades**

### 🚀 **Quick Signup (NOVO!)**
- ✅ Teste grátis por 7 dias
- ✅ Configuração automática em 30s
- ✅ Sem VPS/Docker necessário
- ✅ Suporte técnico incluído
- ✅ Upgrade simplificado

### 🛒 **Carrinho Abandonado**
- ✅ Interceptação interna automática
- ✅ Templates personalizáveis  
- ✅ Shortcodes dinâmicos
- ✅ Logs em tempo real
- ✅ Formatação brasileira (R$)

### 📊 **Envio por Status**
- ✅ Automação por status de pedido
- ✅ Templates por status
- ✅ Variáveis dinâmicas
- ✅ Configuração flexível

### 📱 **Envio Individual**
- ✅ Interface simples
- ✅ Validação automática
- ✅ Histórico de envios

### 📢 **Envio em Massa**
- ✅ Filtros avançados
- ✅ Importação CSV
- ✅ Controle de velocidade
- ✅ Logs detalhados

### ✅ **Validação Checkout**
- ✅ Campo obrigatório
- ✅ Validação tempo real
- ✅ Formatação automática

---

## 🔧 **Hooks para Desenvolvedores**

### 🎨 **Personalizar Mensagem Carrinho Abandonado**

```php
add_filter('wpwevo_cart_abandonment_message', function($message, $data) {
    $trigger_details = $data['trigger_details'];
    
    // Adicionar desconto para carrinhos de alto valor
    if (floatval($trigger_details['cart_total']) > 200) {
        $message .= "\n\n🎁 USE VOLTA10 e ganhe 10% OFF!";
    }
    
    return $message;
}, 10, 2);
```

### 📊 **Hook Após Envio Bem-Sucedido**

```php
add_action('wpwevo_cart_abandonment_sent', function($phone, $message, $trigger_details) {
    // Log personalizado, integração CRM, etc.
    error_log("Mensagem enviada para {$phone} - Valor: {$trigger_details['cart_total']}");
}, 10, 3);
```

### ✅ **Validação Personalizada**

```php
add_filter('wpwevo_validate_whatsapp', function($is_valid, $number) {
    // Sua lógica de validação personalizada
    return $is_valid;
}, 10, 2);
```

---

## 🚨 **Problemas Conhecidos e Soluções**

### ❌ **Erro ao ativar plugin baixado do GitHub**
```
Failed opening required 'plugin-update-checker/plugin-update-checker.php'
```

**✅ Solução:** Atualizado na v1.2.1! Agora funciona perfeitamente mesmo com pasta `wp-whatsevolution-main`.

### ❌ **Plugin não encontra Evolution API** 
**✅ Solução:** Use o Quick Signup para configuração automática ou verifique URL/API Key.

### ❌ **Carrinho abandonado não funciona**
**✅ Solução:** Instale o plugin "WooCommerce Cart Abandonment Recovery" primeiro.

---

## 📝 **Changelog**

### 🆕 **v1.2.1 - 2024-12-20**
- **🚀 NOVO:** Sistema Quick Signup com teste grátis de 7 dias
- **🚀 NOVO:** Configuração automática de Evolution API
- **🚀 NOVO:** Interface de onboarding 1-click
- **🔧 CORREÇÃO CRÍTICA:** Plugin funciona com download direto do GitHub (`wp-whatsevolution-main`)
- **🔧 CORREÇÃO:** Auto-updater com caminhos consistentes
- **✨ MELHORIA:** Interface de configuração redesenhada
- **✨ MELHORIA:** Validação de dados aprimorada
- **🛡️ SEGURANÇA:** Integração backend com Supabase Edge Functions

### v1.2.0 - 2024-12-15
- **🚀 NOVO:** Painel de administração redesenhado
- **✨ MELHORIA:** Templates de mensagem otimizados
- **🔧 CORREÇÃO:** Performance de logs melhorada
- **🐛 CORREÇÃO:** Compatibilidade com WooCommerce 8.0+

### v1.1.0 - 2024-12-10
- **🚀 NOVO:** Interceptação interna de carrinho abandonado
- **🚀 NOVO:** Integração com "WooCommerce Cart Abandonment Recovery"  
- **🚀 NOVO:** Templates personalizáveis com shortcodes
- **✨ MELHORIA:** Logs otimizados e mais limpos
- **🔧 CORREÇÃO:** Formatação automática moeda brasileira (R$)
- **🐛 CORREÇÃO:** Múltiplas correções de compatibilidade

### v1.0.3 - 2024-11-15
- ✨ Envio por status de pedido
- ✨ Envio em massa melhorado
- 🔧 Validação de checkout
- 🐛 Correções gerais

### v1.0.2 - 2024-10-10  
- ✨ Envio em massa
- 🔧 Melhorias interface
- 🐛 Correções de bugs

### v1.0.1 - 2024-09-05
- ✨ Envio individual
- 🔧 Melhorias conexão
- 🐛 Correções iniciais

### v1.0.0 - 2024-08-01
- 🚀 Versão inicial
- ✨ Conexão Evolution API
- ✨ Configurações básicas

---

## 🆘 **Suporte**

- 📧 **Email:** chatrelaxbr@gmail.com
- 🌐 **Site:** [relaxsolucoes.online](https://relaxsolucoes.online/)
- 💬 **GitHub:** [RelaxSolucoes/wp-whatsevolution](https://github.com/RelaxSolucoes/wp-whatsevolution)
- 🚀 **Quick Signup:** Teste grátis em WhatsEvolution > 🚀 Teste Grátis

---

## 📄 **Licença**

**GPL v2 ou posterior** - Plugin 100% gratuito e open source

---

## 👨‍💻 **Desenvolvido por**

**🏢 Relax Soluções**  
🌐 [relaxsolucoes.online](https://relaxsolucoes.online/)  
📧 chatrelaxbr@gmail.com

---

**⭐ Se este plugin foi útil, deixe uma estrela no GitHub!** 

### 🎯 **Links Rápidos**
- [📦 Download Direto](https://github.com/RelaxSolucoes/wp-whatsevolution/archive/refs/heads/main.zip)
- [🚀 Teste Grátis](https://whats-evolution.vercel.app/)
- [📖 Documentação Completa](https://github.com/RelaxSolucoes/wp-whatsevolution/wiki)
- [🐛 Reportar Bug](https://github.com/RelaxSolucoes/wp-whatsevolution/issues) 